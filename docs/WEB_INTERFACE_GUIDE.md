# Stone量化交易系统 - Web界面使用指南

## 🌐 概述

Stone量化交易系统提供了一个现代化的Web界面，让您可以实时监控策略执行情况、查看持仓信息、观察股票价格变动，并通过交互式图表分析交易表现。

## 🚀 快速启动

### 1. 安装依赖

```bash
pip install flask flask-socketio plotly
```

### 2. 启动Web应用

```bash
# 方式1：使用启动脚本（推荐）
python run_web.py

# 方式2：直接启动
python web_app.py
```

### 3. 访问界面

- **本地访问**: http://localhost:8081
- **局域网访问**: http://你的IP地址:8081

## 📊 界面功能

### 🎛️ 控制面板

位于页面顶部，提供以下操作：

- **开始监控**: 启动实时数据更新（每30秒）
- **停止监控**: 停止实时数据更新
- **执行策略**: 手动触发策略分析
- **刷新数据**: 立即更新所有数据

### 💰 资产概览

四个关键指标卡片：

- **总资产**: 当前总资产价值
- **可用资金**: 可用于交易的现金
- **当日盈亏**: 当日的盈亏情况
- **总盈亏**: 累计盈亏情况

### 📈 持仓信息

显示当前持有的股票：

- 股票代码
- 持仓数量
- 成本价格
- 当前价格
- 盈亏金额（红绿显示）

### 📊 关注股票

实时显示股票池中的股票：

- 当前价格
- 涨跌金额和百分比
- 换手率
- 成交量

### 🎯 实时交易信号

显示最新的策略信号：

- 信号类型（买入/卖出）
- 触发策略
- 股票代码
- 信号价格
- 触发原因
- 时间戳

### 🏆 策略表现

显示各策略的历史表现：

- 总信号数
- 信号频率
- 活跃股票数
- 平均日信号数

### 📈 交互式图表

#### 1. 资产价值曲线
- 显示过去30天的资产价值变化
- 实时更新
- 可缩放和平移

#### 2. 策略信号分布
- 各策略的信号数量对比
- 柱状图展示
- 颜色区分不同策略

#### 3. 持仓分布
- 饼图显示各股票的持仓比例
- 悬停显示详细信息
- 动态更新

## 🔧 配置说明

### 配置文件位置
`config/trading_config.json`

### 主要配置项

```json
{
  "stock_pool": [
    "002415", "300059", "300124", ...
  ],
  "strategies": {
    "布林带策略": {
      "enabled": true,
      "weight": 0.25
    },
    ...
  },
  "trading": {
    "initial_capital": 1000000,
    "commission_rate": 0.0003,
    "stamp_tax_rate": 0.001
  },
  "web": {
    "host": "0.0.0.0",
    "port": 8081,
    "debug": true
  }
}
```

## 🔄 实时数据更新

### WebSocket连接
- 使用Socket.IO实现实时通信
- 连接状态显示在导航栏
- 自动重连机制

### 更新频率
- **实时监控模式**: 30秒更新一次
- **手动刷新**: 立即更新
- **图表更新**: 随数据更新

### 数据类型
- 股票价格
- 持仓信息
- 交易信号
- 策略表现

## 📱 响应式设计

### 支持设备
- 桌面电脑
- 平板电脑
- 手机（基本支持）

### 浏览器兼容性
- Chrome（推荐）
- Firefox
- Safari
- Edge

## 🛠️ 技术架构

### 后端技术
- **Flask**: Web框架
- **Flask-SocketIO**: 实时通信
- **Plotly**: 图表生成
- **Threading**: 后台数据更新

### 前端技术
- **Bootstrap 5**: UI框架
- **Font Awesome**: 图标库
- **Plotly.js**: 交互式图表
- **Socket.IO**: 实时通信

### 数据流
```
策略系统 → Web后端 → WebSocket → 前端界面
    ↓           ↓         ↓         ↓
  信号生成   → 数据处理 → 实时推送 → 界面更新
```

## 🔍 使用场景

### 1. 日常监控
- 开启实时监控
- 观察股票价格变动
- 关注策略信号

### 2. 策略分析
- 查看策略表现
- 分析信号分布
- 评估持仓情况

### 3. 手动干预
- 手动执行策略
- 调整监控频率
- 刷新数据

### 4. 历史回顾
- 查看资产价值曲线
- 分析策略效果
- 评估风险收益

## ⚠️ 注意事项

### 性能考虑
- 建议使用Chrome浏览器
- 避免同时打开多个标签页
- 定期清理浏览器缓存

### 网络要求
- 稳定的网络连接
- 低延迟（实时性要求）
- 足够的带宽

### 安全建议
- 仅在可信网络环境使用
- 定期更新密码
- 避免在公共网络使用

## 🐛 故障排除

### 常见问题

#### 1. 无法访问界面
```bash
# 检查服务是否启动
ps aux | grep web_app

# 检查端口是否被占用
lsof -i :8081

# 重启服务
python web_app.py
```

#### 2. 数据不更新
- 检查网络连接
- 刷新浏览器页面
- 重启监控功能

#### 3. 图表显示异常
- 清理浏览器缓存
- 检查JavaScript控制台错误
- 更新浏览器版本

#### 4. 连接状态显示离线
- 检查WebSocket连接
- 确认防火墙设置
- 重新加载页面

### 日志查看
```bash
# 查看Web应用日志
tail -f logs/web_app.log

# 查看策略执行日志
tail -f logs/trading.log
```

## 📞 技术支持

如果遇到问题，请：

1. 查看控制台错误信息
2. 检查网络连接状态
3. 确认配置文件正确性
4. 重启Web应用

## 🔮 未来功能

### 计划中的功能
- [ ] 移动端优化
- [ ] 更多图表类型
- [ ] 策略参数在线调整
- [ ] 历史数据回放
- [ ] 风险预警系统
- [ ] 多用户支持

### 性能优化
- [ ] 数据缓存机制
- [ ] 图表渲染优化
- [ ] 网络请求优化
- [ ] 内存使用优化

---

**享受您的量化交易之旅！** 🚀📈